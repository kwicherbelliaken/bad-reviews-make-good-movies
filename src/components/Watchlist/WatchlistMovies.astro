---
const { movie } = Astro.props;

const response = await fetch(
  `https://dz76rj93fd.execute-api.ap-southeast-2.amazonaws.com/image?fileSize=w500&posterPath=${movie.movieDetails.poster_path}`,
  {
    method: "GET",
    headers: {
      "Content-Type": "application/json",
    },
  }
);

const imageUrl = await response.json();
---

<div class="flex bg-yellow-200 p-14 gap-2">
  <div class="w-48 h-48 bg-purple-300 self-center">
    <img src={imageUrl} />
  </div>
  <div classlex-col gap-4">
    <h1>
      {movie.movieDetails.title}
      {movie.movieDetails.release_date}
    </h1>
    <p>{movie.movieDetails.overview}</p>
    {
      movie.movieDetails.cast.map((cast) => (
        <div>
          <div>
            {cast.name} as {cast.character}
          </div>
          onst{" "}
        </div>
      ))
    }
  </div>
</div>
